<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel</title>
  <style>
    body {
      max-width: 700px;
      margin: 40px auto;
      font-family: sans-serif;
      padding: 20px;
    }
    input, textarea {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
    }
  </style>
</head>
<body>
  <h2>Yeni Blog YazÄ±sÄ± Ekle</h2>

  <input type="text" id="title" placeholder="BaÅŸlÄ±k" />
  <input type="text" id="slug" placeholder="Slug (URL iÃ§in kÄ±sa baÅŸlÄ±k)" />
  <input type="text" id="image" placeholder="GÃ¶rsel URL (opsiyonel)" />
  <textarea id="content" placeholder="Ä°Ã§erik (HTML destekler)" rows="10"></textarea>
  <input type="text" id="tags" placeholder='Etiketler (virgÃ¼l ile ayÄ±r: React,YazÄ±lÄ±m)' />

  <button onclick="addPost()">Blogu Ekle</button>
  <p id="message"></p>

  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

    const supabaseUrl = 'https://hhhpduzdzipzdqmtxuue.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhoaHBkdXpkemlwemRxbXR4dXVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3NjI2NjIsImV4cCI6MjA2NDMzODY2Mn0.FIt6sZ_PAIDeCjf1hH4uzOnN1Ix5-S4TR_AJHoQqxCk'
    const supabase = createClient(supabaseUrl, supabaseKey)

    async function addPost() {
      const title = document.getElementById('title').value.trim();
      const slug = document.getElementById('slug').value.trim();
      const image = document.getElementById('image').value.trim();
      const content = document.getElementById('content').value.trim();
      const tagsRaw = document.getElementById('tags').value.trim();
      const tags = tagsRaw ? tagsRaw.split(',').map(t => t.trim()) : [];

      const date = new Date().toISOString();

      const { data, error } = await supabase
        .from('blog_posts')
        .insert([{
          title,
          slug,
          image,
          content,
          tags,
          date
        }]);

      const message = document.getElementById('message');
      if (error) {
        message.textContent = "Bir hata oluÅŸtu: " + error.message;
        message.style.color = "red";
      } else {
        message.textContent = "Blog baÅŸarÄ±yla eklendi!";
        message.style.color = "green";
      }
    }

      // ğŸ‘‡ Fonksiyonu global scope'a taÅŸÄ±
  window.addPost = addPost;

  // Enter tuÅŸu ile giriÅŸ yapÄ±lmasÄ±nÄ± saÄŸla
document.addEventListener("keydown", function (e) {
  if (e.key === "Enter") {
    addPost();
  }
});

  </script>
</body>
</html>
